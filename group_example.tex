\documentclass[a4paper,oneside]{scrbook}
\usepackage[all,autoload]{svn-multi}[2009/03/06]
\svnidlong
{$HeadURL: svn://server/group_example.tex $}
{$LastChangedDate: 2000-01-01 01:44:01 +0000 (Main file) $}
{$LastChangedRevision: 98 $}
{$LastChangedBy: author3 $}

% Pre-declaration of groups to define order in table
\svngroup{abc}
\svngroup{def}
\svngroup{ghi}
\svngroup{jkl}
\svngroup{Images}
\svngroup{}

%\svnexternal{{tests/test1.tex}}%
\svnexternal{{tests/fish.jpg}}%
\svnignoregraphic{tests/fish.jpg}
\svngraphicsgroup{Images}
%\svnexternalgroup{external}

\let\ifvtex=\relax
\usepackage{hyperref}
\usepackage{listings}
\lstset{basicstyle=\ttfamily}
\makeatletter
% Workaround for listinputlisting
\newcommand*{\svnlstinputlisting}[2][]{%
  {\let\input\@input\lstinputlisting[#1]{#2}}%
}
\makeatother
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{longtable}

% This is an example document to show the group feature of svn-multi 2.0.
% Please the notes below.

\makeatletter
% Version control information table for each chapter
\newcommand{\chaptervctable}{%
\par\noindent
\textbf{Version Control Information for this chapter}\\[\bigskipamount]%
\begin{tabular}{ll}
Chapter URL           & \svnnolinkurl{\svnfileurl}\\
Chapter File name     & \svnnolinkurl{\svnfilefname}\\
Last Changed Revision & \svnfilerev\\
Last Changed Author   & \svnfileauthor\\
Last Changed Date     & \svnfiledate\\
\end{tabular}
\bigskip
\par\noindent
This files contains the following SVN keywords:\\*[-\baselineskip]
{\let\input\@input
\svnlstinputlisting[firstline=5,lastline=9]{\finkpath}
}
}
\makeatother

% This file generates some example sub files from this file to avoid a lot of small
% example files in the CTAN directory. In real life there would be separate
% files from the beginning.

\begin{filecontents}{group_example_part1a.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part1a.tex $}
{$LastChangedDate: 2000-01-01 01:00:01 +0000 (Chapter 1a) $}
{$LastChangedRevision: 101 $}
{$LastChangedBy: author1 $}

\chapter{Subfile 1a}
\chaptervctable
\includegraphics{tests/subdir/leaf.jpg}
\includegraphics{tests/fish}
\svnexternal[def]{{tests/test2.tex}}%
\end{filecontents}

\begin{filecontents}{group_example_part1b.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part1b.tex $}
{$LastChangedDate: 2001-01-01 00:00:01 +0000 (Subfile 1b) $}
{$LastChangedRevision: 102 $}
{$LastChangedBy: author2 $}

\chapter{Subfile 1b}
\chaptervctable
\includegraphics{tests/fish}
\end{filecontents}

\begin{filecontents}{group_example_part1c.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part1c.tex $}
{$LastChangedDate: 2000-01-01 00:00:01 +0000 (Subfile 1c) $}
{$LastChangedRevision: 104 $}
{$LastChangedBy: author3 $}

\chapter{Subfile 1c}
\chaptervctable
\includegraphics{tests/fish}
\end{filecontents}

\begin{filecontents}{group_example_part2a.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part2a.tex $}
{$LastChangedDate: 2000-01-01 00:00:01 +0000 (Subfile 2a) $}
{$LastChangedRevision: 100 $}
{$LastChangedBy: author1 $}

\chapter{Subfile 2a}
\chaptervctable
\includegraphics{tests/fish}
\end{filecontents}

\begin{filecontents}{group_example_part2b.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part2b.tex $}
{$LastChangedDate: 2000-01-01 00:00:01 +0000 (Subfile 2b) $}
{$LastChangedRevision: 101 $}
{$LastChangedBy: author1 $}

\chapter{Subfile 2b}
\chaptervctable
\includegraphics{tests/fish}
\end{filecontents}

\begin{filecontents}{group_example_part3a.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part3a.tex $}
{$LastChangedDate: 2000-01-01 00:00:01 +0000 (Subfile 3a) $}
{$LastChangedRevision: 104 $}
{$LastChangedBy: author3 $}

\chapter{Subfile 3a}
\chaptervctable
\includegraphics{tests/fish}
\end{filecontents}

\begin{filecontents}{group_example_part3b.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part3b.tex $}
{$LastChangedDate: 2000-01-01 00:00:01 +0000 (Subfile 3b) $}
{$LastChangedRevision: 103 $}
{$LastChangedBy: author2 $}

\chapter{Subfile 3b}
\chaptervctable
\includegraphics{tests/fish}
\end{filecontents}

\begin{filecontents}{group_example_part4a.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part4a.tex $}
{$LastChangedDate: 2000-01-01 00:00:01 +0000 (Subfile 4a) $}
{$LastChangedRevision: 99 $}
{$LastChangedBy: author3 $}

\chapter{Subfile 4a}
\chaptervctable
\svnexternal{{svn-multi.dtx}}
\includegraphics{tests/fish}

\input{group_example_part4a_sub1.tex}
\end{filecontents}

\begin{filecontents}{group_example_part4a_sub1.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part4a_sub1.tex $}
{$LastChangedDate: 2000-01-01 00:00:00 +0000 (SubSubfile 4a-1) $}
{$LastChangedRevision: 96 $}
{$LastChangedBy: author2 $}

\section{SubSubfile 4a-1}
This is a sub file in a sub file.
\svnexternal{{Makefile}}

\end{filecontents}

\begin{filecontents}{group_example_part4b.tex}
\svnidlong
{$HeadURL: svn://server/group_example_part4b.tex $}
{$LastChangedDate: 2000-01-01 00:00:01 +0000 (Subfile 4b) $}
{$LastChangedRevision: 105 $}
{$LastChangedBy: author2 $}

\chapter{Subfile 4b}
\chaptervctable
\includegraphics{tests/fish}
\end{filecontents}

\begin{filecontents}{group_example_end.tex}
\svnidlong
{$HeadURL: svn://server/group_example_end.tex $}
{$LastChangedDate: 2000-01-01 00:00:01 +0000 (End) $}
{$LastChangedRevision: 100 $}
{$LastChangedBy: author1 $}

\chapter{End credits}
\chaptervctable
\includegraphics{tests/fish}
\end{filecontents}

\begin{filecontents}{group_example_unexpanded.tex}
\svnidlong
{$HeadURL$}
{$LastChangedDate$}
{$LastChangedRevision$}
{$LastChangedBy$}

\chapter{File with unexpanded keywords}
\chaptervctable
\end{filecontents}

\svnRegisterAuthor{author1}{Andy Author, I.}
\svnRegisterAuthor{author2}{A. Author, II.}
\svnRegisterAuthor{author3}{Anthony Author, III.}

% Have VC info on every part page
\let\origpart=\part
\def\part{%
\setpartpreamble{%
\vspace*{5cm}
\par\noindent
\textbf{Version Control Information for this part:}\\[\bigskipamount]%
\begin{tabular}{ll}
URL of latest File    & \svnnolinkurl{\svncgurl}\\
Name of latest File   & \svnnolinkurl{\svncgfname}\\
Last Changed Revision & \svncgrev\\
Last Changed Author   & \svncgauthor\\
Last Changed Date     & \svncgdate\\
\end{tabular}
}\origpart
}

\listfiles
\begin{document}

% Custom titlepage:
\hbox{}%
\vfill
\pdfbookmark{Title Page}{titlepage}%
{\centering
\Huge\texttt{svn-multi} v2.0 Keyword Groups Example Document\\
\Large Martin Scharrer\\
\large 2009/03/01\\
}%
\vfill
\par\noindent
This is an example and test document for the group feature of svn-multi 2.0.
Please note that the revision keywords were generated manually for testing
purposes. The dates are not consistent with the revisions and contain a debug
name instead of the date text like `(Sat, January 1 2009)'. This doesn't
influence the correct functionality of the svn-multi package.\\
\bigskip
{\hbox{}\hfill Happy \TeX ing!}\\
\vfill%
\par\noindent
{\large Version Control Information for this document:\\[\bigskipamount]}%
\begin{tabular}{lp{0.7\textwidth}}
Main URL              & \svnnolinkurl{\svnmainurl}\\
Main File name        & \svnnolinkurl{\svnmainfilename}\\
URL of latest file    & \svnnolinkurl{\svnurl}\\
Name of latest file   & \svnnolinkurl{\svnfname}\\
Last Changed Revision & \svnrev\\
Last Changed Author   & \svnauthor\\
Last Changed Date     & \svndate\\
\end{tabular}
\bigskip\par\noindent
The main file of this document contains the following SVN
keywords:\\*[-\baselineskip]
\svnlstinputlisting[firstline=4,lastline=8]{\finkpath}
\thispagestyle{empty}
\clearpage

% Default in Engish
\renewcommand{\svnbeforetable}{%
This is an automatic generated table using the \textbf{\sffamily table} option.
\bigskip\par\noindent
}
\clearpage
\pdfbookmark{Table of Revisions (1)}{tora}%
\tableofrevisions

% Redefined to German
% Uses booktabs for nicer table
\renewcommand{\svnbeforetable}{%
Can be redefined to another format and language: Verstehen Sie Deutsch?
\bigskip\par\noindent
}
\renewenvironment{svntable}{%
\begin{longtable}{p{6.2cm}rll}
\toprule
}
{%
\bottomrule
\end{longtable}
}
\renewcommand*\svntablehead{%
    Name & Rev & Autor & Datum \\
\midrule
}
\renewcommand{\svnrevisionsname}{Revisionen}
\renewcommand{\svntabgroup}[1]{Gruppe `#1'}

% Print highest revision bold:
\renewcommand{\svntabrev}[1]{\ifnum#1=\svnrev\textbf{#1}\else#1\fi}
% Saver: \ifthenelse from the 'ifthen' package!

\renewcommand{\svntabfile}[2]{\hspace*{#1\medskipamount}Datei `{\scriptsize\svnnolinkurl{#2}}'}
\renewcommand{\svntabsubgroup}[2]{%
  \hspace*{#1\medskipamount}%
  `{\scriptsize\svnnolinkurl{#2}}'%
}
\renewcommand{\svntabglobal}[1]{Gesamtes Dokument}
\renewcommand{\svntabdate}[8]{\small #3.#2.#1\ #4:#5:#6}
\renewcommand{\svngrouprow}{\midrule}
\renewcommand{\endsvnglobalrow}{\midrule Ohne Gruppe:\\}
\clearpage
\pdfbookmark{Table of Revisions (2)}{torb}%
\tableofrevisions
\clearpage


\svngroup{abc}
\part{Abc}
\include{group_example_part1a}
\include{group_example_part1b}
\include{group_example_part1c}

\svngroup{def}
\part{Def}
\include{group_example_part2a}
\include{group_example_part2b}

\svngroup{ghi}
\part{Ghi}
\include{group_example_part3a}
\include{group_example_part3b}

\svngroup{jkl}
\part{jkl}
\include{group_example_part4a}
\include{group_example_part4b}

% The rest doesn't belong to a file group:
\svngroup{}
\include{group_example_end}
\include{group_example_unexpanded}

\chapter*{Reference Examples}
%To reference e.g.\ keyword from group `abc' use:
\section*{Group `abc'}
\svnsetcg{abc} Revision \svncgrev\ from \svncgtoday\ \svncgtime\ done by
\svnFullAuthor{\svncgauthor}. Latest file is \svnnolinkurl{\svncgfname} (URL: \url{\svncgurl}).

\section*{Subgroup `group\_example\_part3b'}
\svnsetcg{group_example_part3b} Revision \svncgrev\ from \svncgtoday\ \svncgtime\ done by
\svnFullAuthor{\svncgauthor}. Latest file is \svnnolinkurl{\svncgfname} (URL: \url{\svncgurl}).

\section*{File `group\_example\_part3b.tex'}
\svnsetcg{group_example_part3b.tex} Revision \svncgrev\ from \svncgtoday\ \svncgtime\ done by
\svnFullAuthor{\svncgauthor}. File name and url: \svnnolinkurl{\svncgfname} (URL: \url{\svncgurl}).


\end{document}

